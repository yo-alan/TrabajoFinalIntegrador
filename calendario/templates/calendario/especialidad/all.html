{% extends "admin/base.html" %}

{% block title %}Listado de especialidades{% endblock %}

{% block article %}
	<script>
		function eliminarEspecialidad(especialidad_id){
			
			if(!confirm("¿Está seguro que desea eliminar a esta especialidad?"))
				return;
			
			$.ajax({
				url: '/calendario/especialidad/delete/' + especialidad_id + '/',
				type: 'POST',
				data: {
					csrfmiddlewaretoken: '{{ csrf_token }}'
				},
				success: function(response) {
					window.location.href = "{% url 'calendario:especialidad_all' %}";
				}
			});
		}
	</script>
	<div class="container-fluid">
		<div class="row clearfix">
			<div class="col-md-12">
				<div class="page-header">
					<h1>
						Especialidades<small>.</small>
					</h1>
				</div>
				<div class="modal fade" id="modal-container-789271" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
					<div class="modal-dialog">
						<div class="modal-content">
							<div class="modal-header text-center">
								<button type="button" class="close" data-dismiss="modal" aria-hidden="true">
									×
								</button>
								<h4 class="modal-title" id="myModalLabel">
									Eliminar especialidad
								</h4>
							</div>
							<div class="modal-body">
								¿Está seguro que desea eliminar a -tanto-?
							</div>
							<div class="modal-footer">
								 
								<button type="button" class="btn btn-default" data-dismiss="modal">
									No
								</button> 
								<button type="button" class="btn btn-primary">
									Eliminar
								</button>
							</div>
						</div>
					</div>
				</div>
				<table class="table table-hover">
					<thead>
						<tr>
							<th>
								Nombre
							</th>
							<th>
								Carga horaria semanal
							</th>
							<th>
								Carga máxima diaria
							</th>
							</th>
							<th>
								Acciones
							</th>
						</tr>
					</thead>
					{% if especialidades %}
						<tbody>
							{% for especialidad in especialidades %}
								<tr>
									<td>
										{{ especialidad.nombre }}
									</td>
									<td>
										{{ especialidad.carga_horaria_semanal }}
									</td>
									<td>
										{{ especialidad.max_horas_diaria }}
									</td>
									<td>
										<div class="btn btn-group btn-block">
											<a class="btn btn-default" title="Editar especialidad" href="{% url 'calendario:especialidad_edit' especialidad.id %}"><i class="glyphicon glyphicon-pencil"></i></a>
											<a id="modal-789271" onclick="eliminarProfesional({{ profesional.id }})" role="button" class="btn btn-danger" data-toggle="modal"><i class="glyphicon glyphicon-trash"></i></a>
										</div>
									</td>
								</tr>
							{% endfor %}
						</tbody>
					{% else %}
						<tfoot align="center">
							<tr>
								<td colspan="5">No hay especialidades cargadas.</td>
							</tr>
						</tfoot>
					{% endif %}
				</table>
			</div>
		</div>
	</div>
{% endblock %}
